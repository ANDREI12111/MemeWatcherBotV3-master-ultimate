from config import MAX_WALLET_BALANCE, BITGET_WITHDRAW_ADDRESS
from notifier import send_push_message

def get_wallet_balance():
    # TODO: –†–µ–∞–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å RPC –∏–ª–∏ API
    return 523.7  # –ü—Ä–∏–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞

def auto_withdraw_excess():
    try:
        balance = get_wallet_balance()
        if balance > MAX_WALLET_BALANCE:
            excess = round(balance - MAX_WALLET_BALANCE, 2)
            print(f"[WITHDRAW] –û—Ç–ø—Ä–∞–≤–ª—è—é {excess} USDC –Ω–∞ Bitget")
            send_push_message(f"üí∏ –ê–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–∞ {excess} USDC –Ω–∞ Bitget")

            # TODO: –°–¥–µ–ª–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é —á–µ—Ä–µ–∑ RPC

        else:
            print("[OK] –ë–∞–ª–∞–Ω—Å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã")

    except Exception as e:
        print(f"[Wallet Error] {e}")
