import requests
from config import TELEGRAM_TOKEN, TELEGRAM_CHAT_ID, PUSHOVER_USER_KEY, PUSHOVER_APP_TOKEN

def send_telegram_message(text):
    url = f"https://api.telegram.org/bot{TELEGRAM_TOKEN}/sendMessage"
    payload = {
        "chat_id": TELEGRAM_CHAT_ID,
        "text": text
    }
    try:
        requests.post(url, json=payload)
    except Exception as e:
        print(f"[Telegram Error] {e}")

def send_push_message(text, title="MemeWatcherBot"):
    url = "https://api.pushover.net/1/messages.json"
    payload = {
        "token": PUSHOVER_APP_TOKEN,
        "user": PUSHOVER_USER_KEY,
        "title": title,
        "message": text
    }
    try:
        requests.post(url, data=payload)
    except Exception as e:
        print(f"[Push Error] {e}")

def notify_start():
    msg = "✅ Бот запущен и готов к работе"
    send_telegram_message(msg)
    send_push_message(msg)
